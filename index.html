<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="bootstrap框架/css/bootstrap.css">
</head>
<style>
    html,
    body {
        margin: 0;
        padding: 0;

    }

    /* body {
        padding-bottom: 60px;
        padding-top: 50px;
    } */
    html,
    body {
        width: 100%;
        height: 100%;

        margin: 0px;
    }

    #main {
        width: 100%;
        height: 100%;
        /* background:red;*/
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: start;
    }

    .top-head {
        width: 100%;
        height: 10%;
        /* background: orange;*/
        display: flex;
        flex-wrap: no-wrap;
        justify-content: center;
    }

    .left-menu {
        width: 12%;
        height: 90%;
        /*background:yellow;*/
    }

    .right-content {
        width: 88%;
        height: 90%;
        /*   background:blue;*/
    }

    #logo {
        width: 10%;
        height: 100%;
        line-height: 80px;
        /*background:purple;*/
    }

    #title {
        width: 50%;
        font-size: 28px;
        text-align: center;
        line-height: 80px;
        /*background:#eee;*/
    }

    #per-mes {
        width: 20%;
        height: 100%;
        line-height: 80px;
        /*background:green;*/
    }

    li {
        list-style: none;
    }

    a {
        text-decoration: none;
    }

    a:focus,
    a:hover {
        color: #23527c;
        text-decoration: none;
    }

    li:hover {
        list-style: none;
    }


    dl {
        float: left;
        margin: 30px;
        width: 300px;
        height: 500px;
    }

    img {
        width: 300px;
        height: 300px;

    }

    /* .form-control {
        margin-left: 200px;
    } */

    .nav-pills li {
        margin: 0 200px;
    }

    .plus {
        border: none;
        color: blue;
        background: none;
    }

    #logo img {
        width: 200px;
        height: 100px;
    }

    .shan {
        display: none;
    }

    .xiuGai {
        display: none;
    }
</style>

<body>
    <div id="main">
        <div class="top-head">
            <div id="logo"><img src="img/logo.jpg" alt=""></div>
            <div id="title">商品后台管理系统</div>
            <div id="per-mes">您好，admin。欢迎您使用后台管理系统！ </div>
        </div>
        <div class="left-menu">
            <!-- 侧边栏标签页 -->
            <ul class="nav nav-stacked">
                <!-- 侧边栏选项 -->
                <li role="presentation" class="active">
                    <!-- 选项控制data-target对应的显隐 -->
                    <a href="#" data-toggle="collapse" data-target="#list">商品管理</a>
                    <!-- 隐藏的详细菜单 -->
                    <ul id="list" class="collapse in">
                        <li class="active">
                            <!-- <a href=""> -->
                            <input type="button" value="添加" class="plus" data-toggle="modal" data-target="#myModal">
                            <!-- </a> -->
                        </li>
                        <li>
                            <a href="" id="data-de">删除</a>
                        </li>
                    </ul>
                </li>
                <li role="presentation"><a href="#" data-toggle="collapse" data-target="#list1">Profile</a>
                    <ul id="list1" class="collapse in">
                        <li class="active">
                            <!-- <a href="" > -->
                                <!-- 修改 -->
                                <input id="data-xiu" type="button" value="修改" class="update" >
                            <!-- </a> -->
                        </li>
                        <li><a href="">操作二</a></li>
                    </ul>
                </li>
                <li role="presentation"><a href="#">Messages</a></li>
            </ul>
        </div>
        <div class="right-content">

            <div style="margin:10px;">
                <ol class="breadcrumb">
                    <li><a href="#">首页</a></li>
                    <li><a href="#">Library</a></li>
                    <li class="active">Data</li>
                </ol>



                <div id="content">
                </div>
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">×</span></button>
                                <h4 class="modal-title" id="myModalLabel">添加商品</h4>
                            </div>
                            <div class="modal-body">

                                <div class="form-group">
                                    <label for="txt_departmentname">商品名称</label>
                                    <input type="text" name="txt_departmentname" class="form-control"
                                        id="txt_departmentname" placeholder="商品名称">
                                </div>
                                <div class="form-group">
                                    <label for="txt_parentdepartment">商品价格</label>
                                    <input type="text" name="txt_parentdepartment" class="form-control"
                                        id="txt_parentdepartment" placeholder="商品价格">
                                </div>
                                <div class="form-group">
                                    <label for="txt_departmentlevel">商品路径</label>
                                    <input type="text" name="txt_departmentlevel" class="form-control"
                                        id="txt_departmentlevel" placeholder="商品图片路径">
                                </div>
                                <div class="form-group">
                                    <label for="txt_statu">描述</label>
                                    <input type="text" name="txt_statu" class="form-control" id="txt_statu"
                                        placeholder="形容">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><span
                                        class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>
                                <button type="button" id="btn_submit" class="btn btn-primary save-btn"
                                    data-dismiss="modal"><span class="glyphicon glyphicon-floppy-disk"
                                        aria-hidden="true"></span>保存</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-default navbar-fixed-bottom">
        <div class="container">

            <ul class="nav nav-pills">
                <li role="presentation" class="active"><a href="#">首页</a></li>
                <li role="presentation"><a href="cart.html">购物车</a></li>
                <li role="presentation"><a href="#">我的</a></li>
            </ul>
        </div>

    </nav>

    <!-- <script src="../jquery.1.11.3.js"></script> -->
    <script src="bootstrap框架/js/jQuery.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="bootstrap框架/js/bootstrap.min.js"></script>
    <script>
        $(function () {
            axios.get("http://localhost:3000/productDatas").then(function (data) {
                var data = data.data;
              //  console.log(data)
                var str = "";
                for (let i = 0; i < data.length; i++) {
                    str += `<dl><dt><img src="${data[i].imgsrc}" alt=""></dt><dd>${data[i].title}</dd><dd>${data[i].price}</dd>
                        <input type="button" class="inputAll" data-id="${data[i].id}" value="加入购物车">
                        </br><input type="button"value="删除" class="shan"  data-id="${data[i].id}">
                        </br><input type="button"value="修改" class="xiuGai" data-id="${data[i].id} 
                                    data-target="#myModal"">
                        </dl>
                   `;
                    // console.log(str);
                    // <input type="button"value="-"><input type="text"value="1"><input type="button"value="+">
                }
                $('#content').html(str);
                $("#data-de").click(function () {
                    $(".shan").show();
                    $("#content").find(".shan").click(function () {
                        let id1 = $(this).data("id");
                        let _this = this;
                        axios.delete("http://localhost:3000/productDatas/" + id1).then(
                            function () {
                                //location.reload();
                                $(_this).parents("dl").remove();
                            });
                    })
                    return false;
                });
            })
      //  });

        // $("#data-xiu").click(function () {
        //             $(".xiuGai").show();
        //             $(".shan").hide();
        //             $(".xiuGai").on("click",function () {
        //                 $('#myModal').modal('show')
        //                 let id1 = $(this).data("id");
        //                 // let _this = this;
        //                 axios.get("http://localhost:3000/productDatas/"+id1).then(res=>{
        //                     // var data = data.data;
        //                     // console.log(data);
        //                  console.log(data);



        //                 })
        //                 // $("#txt_departmentname").val()
        //                 //  axios.patch("http://localhost:3000/productDatas/"+id1).then(function(){
        //                 //             //location.reload();
        //                 //             // $(_this).parents("dl").remove();
        //                 //         });
        //                 //         })
        //                 return false;
        //             });
                    $(".save-btn").on("click", function () {
                        axios.post("http://localhost:3000/productDatas", {
                            title: $("#txt_departmentname").val(),
                            price: $("#txt_parentdepartment").val(),
                            imgsrc: $("#txt_departmentlevel").val(),
                            description: $("#txt_statu").val()
                        }).then(res => {
                            location.reload();
                        }).catch(err => {
                            console.log(err);
                        })

                    })






                    // update();
                    // axios.post("http://localhost:3000/productDatas").then(f)

                    // axios.put("http://localhost:3000/productDatas/2",{title:"shangPin"});
                    //  axios.patch("http://localhost:3000/productDatas/1"),{params:{price:1000}};
                    //axios.delete("http://localhost:3000/productDatas/2");


                    // update();
                    // $(".")
                    // axios.get("http://localhost:3000/cartData").then(function (data) {
                    //                 var cartData = data.data;
                    //                 console.log(cartData);
                    //             }).then(function (cartData) {
                    //                 if (cartData) {
                    //                     var cartData = cartData;
                    //                 } else {
                    //                     var cartData = {};
                    //                 }

                    //                 $(".inputAll").click(function () {
                    //                     var id = $(this).data("id");
                    //                     console.log($(this).data("id"));

                    //                     if (!cartData[id]) {
                    //                         cartData[id] = 1;
                    //                         console.log(cartData[id]);
                    //                     } else {
                    //                         cartData[id]++;
                    //                     }

                    //                     axios.patch("http://localhost:3000/cartData", {
                    //                         id: cartData[id]

                    //                     })
                    //                 })



                 })
    </script>
</body>

</html>